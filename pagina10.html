<!DOCTYPE html>
<html>
<head>
	<script
			  src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
			  integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI="
			  crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js" integrity="sha512-QSkVNOCYLtj73J4hbmVoOV6KVZuMluZlioC+trLpewV8qMjsWqlIQvkn1KGX2StWvPMdWGBqim1xlC8krl1EKQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script type="text/javascript" src="cookies.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="style.css">
	<title>Pagina 10</title>
</head>
<body>


<h1>Resp</h1>

<div class="grid grid-container3">
  <div id="gris_1"></div>
  <div id="gris_2"></div>
  <div class="empty"></div>
  <div id="gris_3"></div>
  <div>Ans</div>

  <div style="grid-column: 1 / span 2">1.2.4</div>
  <div style="background-color: white"></div>
  <div>0.1.3</div>
  <div style="border-style: dotted;" id="niv_ansidead"></div>
</div>
<div class="grid grid-container4">

  <div>Comb.</div>
  <div>!!!</div>
  <div>!!</div>
  <div>!</div>
  <div style="grid-column: 5 / span 2"></div>
  <div>!</div>
  <div>!!</div>
  <div>!!!</div>
  <div>Ans</div>

  <div style="border-style: dotted;"></div>
  <div id="cores_0">!!!</div>
  <div id="cores_1">!!</div>
  <div id="cores_2">!</div>
  <div id="cores_3"></div>
  <div id="cores_4"></div>
  <div id="cores_5">!</div>
  <div id="cores_6">!!</div>
  <div id="cores_7">!!!</div>
  <div id="niv_ansidead_cores" style="border-style: dotted;"></div>

  <div style="grid-column: 2 / span 3">0.6.7</div>
  <div class="empty" style="grid-column: 5 / span 2"></div>
  <div style="grid-column: 7 / span 3">1.2.3.4</div>
  <div class="empty"></div>

  <div class="empty"></div>
  <div class="empty" id="ccc"></div>
  <div class="empty" id="cc"></div>
  <div class="empty" id="c"></div>
  <div class="empty"></div>
  <div class="empty"></div>
  <div class="empty" id="a"></div>
  <div class="empty" id="aa"></div>
  <div class="empty" id="aaa"></div>
  <div class="empty"></div>
</div>
<hr>
<div class="grid grid-container4">

  <div>Test del <br>conflicto.</div>
  <div class="empty" style="grid-column: 5 / span 5"></div>
  <div>Másc.</div>

  <div style="border-style: dotted;"></div>
  <div id="formas_0">!!!</div>
  <div id="formas_1">!!</div>
  <div style="grid-column: 4 / span 4; background-color: white;"></div>
  <div id="formas_2">!!</div>
  <div id="formas_3">!!!</div>
  <div id="mascaras" style="border-style: dotted;"></div>

  <div style="grid-column: 2 / span 2">0.6.7</div>
  <div class="empty" style="grid-column: 4 / span 3"></div>
  <div style="grid-column: 8 / span 2">1.2.3.4</div>
  <div class="empty"></div>

  <div class="empty"></div>
  <div class="empty" id="ccc"></div>
  <div class="empty" id="cc"></div>
  <div class="empty" id="c"></div>
  <div class="empty"></div>
  <div class="empty"></div>
  <div class="empty" id="a"></div>
  <div class="empty" id="aa"></div>
  <div class="empty" id="aaa"></div>
  <div class="empty"></div>
</div>
<hr>
<div class="grid grid-container5">

  <div>4CF</div>
  <div id ="rejilla0"></div>
  <div id ="rejilla1"></div>
  <div id ="rejilla2"></div>
  <div id ="rejilla3"></div>
  <div class="empty"></div>
  <div id ="rejilla_0"></div>
  <div id ="rejilla_1"></div>
  <div id ="rejilla_2"></div>
  <div id ="rejilla_3"></div>
  <div class="empty"></div>

  <div class="empty"></div>
  <div>I1</div>
  <div>D2</div>
  <div>O3</div>
  <div>P4</div>
  <div class="empty"></div>
  <div>AZ</div>
  <div>V</div>
  <div>R</div>
  <div>AM</div>
  <div class="empty"></div>

  <div>Azul</div>
  <div class ="azul0"></div>
  <div class ="azul1"></div>
  <div class ="azul2"></div>
  <div class ="azul3"></div>
  <div class="empty"></div>
  <div class ="azul_0" style="border-style: solid;"></div>
  <div class ="azul_1"></div>
  <div class ="azul_2"></div>
  <div class ="azul_3"></div>
  <div class="empty">Pertenencia</div>

  <div>Verde</div>
  <div class ="verde0"></div>
  <div class ="verde1"></div>
  <div class ="verde2"></div>
  <div class ="verde3"></div>
  <div class="empty"></div>
  <div class ="verde_0"></div>
  <div class ="verde_1" style="border-style: solid;"></div>
  <div class ="verde_2"></div>
  <div class ="verde_3"></div>
  <div class="empty">Como se ve a si mismo</div>

  <div>Rojo</div>
  <div class ="rojo0"></div>
  <div class ="rojo1"></div>
  <div class ="rojo2"></div>
  <div class ="rojo3"></div>
  <div class="empty"></div>
  <div class ="rojo_0"></div>
  <div class ="rojo_1"></div>
  <div class ="rojo_2" style="border-style: solid;"></div>
  <div class ="rojo_3"></div>
  <div class="empty">Energía</div>

  <div>Amarillo</div>
  <div class ="amarillo0"></div>
  <div class ="amarillo1"></div>
  <div class ="amarillo2"></div>
  <div class ="amarillo3"></div>
  <div class="empty"></div>
  <div class ="amarillo_0"></div>
  <div class ="amarillo_1"></div>
  <div class ="amarillo_2"></div>
  <div class ="amarillo_3" style="border-style: solid;"></div>
  <div class="empty">Apertura</div>

  <div>K * 4CF</div>
  <div id ="rejilla_0_4cf"></div>
  <div id ="rejilla_1_4cf"></div>
  <div id ="rejilla_2_4cf"></div>
  <div id ="rejilla_3_4cf"></div>
  <div>Suma</div>
  <div class="suma_0"></div>
  <div class="suma_1"></div>
  <div class="suma_2"></div>
  <div class="suma_3"></div>
  <div class="empty"></div>

  <div>Suma</div>
  <div class="suma_0"></div>
  <div class="suma_1"></div>
  <div class="suma_2"></div>
  <div class="suma_3"></div>
  <div>Norma</div>
  <div>3-8</div>
  <div>3-8</div>
  <div>5-10</div>
  <div>3-9</div>
  <div class="empty"></div>

  <div>Diferencia</div>
  <div id="dif_0"></div>
  <div id="dif_1"></div>
  <div id="dif_2"></div>
  <div id="dif_3"></div>
  <div>Sobre/Bajo</div>
  <div id="sobre_bajo1">1</div>
  <div id="sobre_bajo2">2</div>
  <div id="sobre_bajo3">3</div>
  <div id="sobre_bajo4">4</div>
  <div class="empty"></div>
</div>
<hr>
<div class="grid grid-container2"> <!-- Indice de intro/Extroversion-->
  
  <div>///</div>
  <div>//</div>
  <div>/</div>
  <div>O</div>

  <div id="polo0_0"></div>
  <div id="polo0_1"></div>
  <div id="polo0_2"></div>
  <div id="polo0_3"></div>

  <div>1º</div>
  <div>2º</div>
  <div>3º</div>
  <div>4º</div>
  
  <div id="polo1_3"></div>
  <div id="polo1_2"></div>
  <div id="polo1_1"></div>
  <div id="polo1_0"></div>

  <div id="polo2_0"></div>
  <div id="polo2_1"></div>
  <div id="polo2_2"></div>
  <div id="polo2_3"></div>

  <div id="polo3_0"></div>
  <div id="polo3_1"></div>
  <div id="polo3_2"></div>
  <div id="polo3_3"></div>

  <div id="polo4_0"></div>
  <div id="polo4_1"></div>
  <div id="polo4_2"></div>
  <div id="polo4_3"></div>


  <div style="grid-column: 1 / span 2">Introversion</div>
  <div style="grid-column: 3 / span 2">Extroversion</div>
  <div style="grid-column: 1 / span 2" id="ind_intr"></div>
  <div style="grid-column: 3 / span 2" id="ind_extr"></div>
  <div id="ind_intr_pas">Pas.</div>
  <div id="ind_intr_act">Act.</div>
  <div id="ind_extr_act">Act.</div>
  <div id="ind_extr_pas">Pas.</div>
</div>
<hr>



	<div class="grid grid-container3">
		<div style="grid-row: 1 / 4; transform; vertical-align"><br>TIEMPO</div>
		<div class="empty"></div>
		<div>AZ</div>
		<div>V</div>
		<div>Estab.</div>
		<div>AZ</div>
		<div class="azul_0"></div>
		<div class="azul_1"></div>
		<div style="grid-row: span 2; border-style: dotted;">X</div>
		<div>V</div>
		<div class="verde_0"></div>
		<div class="verde_1"></div>
	</div>
	<div class="grid grid-container3">
		<div style="grid-row: 1 / 4; transform; vertical-align"><br>TIEMPO</div>
		<div class="empty"></div>
		<div>R</div>
		<div>AM</div>
		<div>Variab.</div>
		<div>R</div>
		<div class="rojo_2"></div>
		<div class="rojo_3"></div>
		<div style="grid-row: span 2; border-style: dotted;">X</div>
		<div>AM</div>
		<div class="amarillo_2"></div>
		<div class="amarillo_3"></div>
	</div>
	<hr>

	<div class="grid grid-container3">
		<div style="grid-row: 1 / 4; transform; vertical-align"><br>ESPACIO</div>
		<div class="empty"></div>
		<div>V</div>
		<div>R</div>
		<div>Auto.</div>
		<div>V</div>
		<div class="verde_1"></div>
		<div class="verde_2"></div>
		<div style="grid-row: span 2; border-style: dotted;">X</div>
		<div>R</div>
		<div class="rojo_1"></div>
		<div class="rojo_2"></div>
	</div>

	<div class="grid grid-container3">
		<div style="grid-row: 1 / 4; transform; vertical-align"><br>ESPACIO</div>
		<div class="empty"></div>
		<div>AZ</div>
		<div>AM</div>
		<div>Hete.</div>
		<div>AZ</div>
		<div class="azul_0"></div>
		<div class="azul_3"></div>
		<div style="grid-row: span 2; border-style: dotted;">X</div>
		<div>AM</div>
		<div class="amarillo_0"></div>
		<div class="amarillo_3"></div>
	</div>
	<hr>

	<div class="grid grid-container3">
		<div style="grid-row: 1 / 4; transform; vertical-align"><br>RELACIÓN</div>
		<div class="empty"></div>
		<div>AZ</div>
		<div>R</div>
		<div>Integ.</div>
		<div>AZ</div>
		<div class="azul_0"></div>
		<div class="azul_2"></div>
		<div style="grid-row: span 2; border-style: dotted;">X</div>
		<div>R</div>
		<div class="rojo_0"></div>
		<div class="rojo_2"></div>
	</div>

	<div class="grid grid-container3">
	  <div style="grid-row: 1 / 4; transform; vertical-align"><br>RELACIÓN</div>
	  <div class="empty"></div>
		<div>V</div>
		<div>AM</div>
		<div>Difer.</div>
		<div>V</div>
	  <div class="verde_1"></div>
	  <div class="verde_3"></div>
	  <div style="grid-row: span 2; border-style: dotted;">X</div>
		<div>AM</div>
	  <div class="amarillo_1"></div>
	  <div class="amarillo_3"></div>
	</div>

</div>

<canvas id="myCanvas" width="600" height="370" style="border:1px solid #d3d3d3;"></canvas>

<canvas id="myCanvas2" width="600" height="370" style="border:1px solid #d3d3d3;"></canvas>

<canvas id="myChart" width="600" height="370" style="border:1px solid #d3d3d3;"></canvas>

</body>
</html>

<script type="text/javascript">

	function get_polo(array){

	array.sort(function(a,b) {
    	return b[0]-a[0]
		});
		array = array.map(function(value,index) { return value[1]; });
		return array;
	}

	var grises = getCookie("grises").split(",");
	var colores = getCookie("colores").split(",");
	var figuras = getCookie("figuras").split(",");
	var rejilla = getCookie("rejilla").split(",");
	var azul = getCookie("azules").split(",");
	var amarillo = getCookie("amarillos").split(",");
	var verde = getCookie("verdes").split(",");
	var rojo = getCookie("rojos").split(",");


	var aux = figuras[2];
	figuras[2] = figuras[3];
	figuras[3] = aux;

	var mascaras = 0;
	if ( figuras[0] == colores[0] )
		mascaras +=1;
	if ( figuras[1] == colores[2] )
		mascaras +=1;
	if ( figuras[2] == colores[6] )
		mascaras +=1;
	if ( figuras[3] == colores[7] )
		mascaras +=1;

	for (var i = 0; i< 4; i++){
		$("#formas_"+i).html( figuras[i]);
	}
	$("#mascaras").html( mascaras+"/4");

	var ansiedad = 0;
	var ansiedad_cores = 0;

	if( [1,2,4].includes(parseInt(grises[0])))
		ansiedad +=1;
	if( [1,2,4].includes(parseInt(grises[1])))
		ansiedad +=1;
	if( [0,1,3].includes(parseInt(grises[2])))
		ansiedad +=1;
	$("#gris_1").html(grises[0]);
	$("#gris_2").html(grises[1]);
	$("#gris_3").html(grises[2]);
	$("#niv_ansidead").html( ansiedad+"/3");


	if( [0,6,7].includes(parseInt(colores[0]))){
		ansiedad_cores +=3;
		$("#ccc").html("C");
	}
	if( [0,6,7].includes(parseInt(colores[1]))){
		ansiedad_cores +=2;
		$("#cc").html("C");
		$("#ccc").html("C");
	}
	if( [0,6,7].includes(parseInt(colores[2]))){
		ansiedad_cores +=1;
		$("#c").html("C");
		$("#cc").html("C");
		$("#ccc").html("C");
	}


	if( [1,2,3,4].includes(parseInt(colores[7]))){
		ansiedad_cores +=3;
		$("#aaa").html("A");
	}
	if( [1,2,3,4].includes(parseInt(colores[6]))){
		ansiedad_cores +=2;
		$("#aa").html("A");
		$("#aaa").html("A");
	}
	if( [1,2,3,4].includes(parseInt(colores[5]))){
		ansiedad_cores +=1;
		$("#a").html("A");
		$("#aa").html("A");
		$("#aaa").html("A");
	}

	for(var i =0; i< 8; i++){
		$("#cores_"+i).html(colores[i]);
	}
	$("#niv_ansidead_cores").html( ansiedad_cores+"/12");

	var sumas =[0,0,0,0];

	for(var i =0; i< 4; i++){
		$("#rejilla_"+i).html(rejilla[i]);
		$("#rejilla"+i).html( "/".repeat(rejilla[i]));
		$("#rejilla_"+i+"_4cf").html(rejilla[i]*4);


		$(".azul_"+i).html(azul[i]);
		$(".azul"+i).html( "/".repeat(azul[i]));		

		$(".amarillo_"+i).html(amarillo[i]);
		$(".amarillo"+i).html( "/".repeat(amarillo[i]));		

		$(".verde_"+i).html(verde[i]);
		$(".verde"+i).html( "/".repeat(verde[i]));		

		$(".rojo_"+i).html(rojo[i]);
		$(".rojo"+i).html( "/".repeat(rojo[i]));


		var flag = [azul[i], amarillo[i], verde[i], rojo[i]];
		const aCount = new Map([...new Set(flag)].map(x => [x, flag.filter(y => y === x).length]));

		if ( aCount.get("0") > 2)
			sumas[i] =	0;
		else{ 
			if ( aCount.get("3") > 2)
				sumas[i] =	12;
			else
				sumas[i] =	parseInt(azul[i]) + parseInt(amarillo[i]) + parseInt(verde[i]) + parseInt(rojo[i]);
		}

		$(".suma_"+i).html(sumas[i]);
		$("#dif_"+i).html(Math.abs(rejilla[i]*4 - sumas[i] ));


	}


	if( sumas[0] <= 3){
		$("#sobre_bajo1").html("-1");
		$("#sobre_bajo1").attr("class" ,"cubo");
	}
	if( sumas[0] >= 8){
		$("#sobre_bajo1").html("+1");
		$("#sobre_bajo1").attr("class" ,"cubo");
	}

	if( sumas[1] <= 3){
		$("#sobre_bajo2").html("-2");
		$("#sobre_bajo2").attr("class" ,"cubo");

	}
	if( sumas[1] >= 8){
		$("#sobre_bajo2").html("+2");
		$("#sobre_bajo2").attr("class" ,"cubo");
	}

	if( sumas[2] <= 5){
		$("#sobre_bajo3").html("-3");
		$("#sobre_bajo3").attr("class" ,"cubo");
	}
	if( sumas[2] >= 10){
		$("#sobre_bajo3").html("+3");
		$("#sobre_bajo3").attr("class" ,"cubo");
	}

	if( sumas[3] <= 3){
		$("#sobre_bajo4").html("-4");
		$("#sobre_bajo4").attr("class" ,"cubo");
	}
	if( sumas[3] >= 9){
		$("#sobre_bajo4").html("+4");
		$("#sobre_bajo4").attr("class" ,"cubo");
	}


	$("#ind_intr").html(sumas[0]+sumas[1]); 
	$("#ind_extr").html(sumas[2]+sumas[3]); 

	if ( sumas[0] >sumas[1]){
		$("#ind_intr_pas").html("Pas. V"); 
		$("#ind_intr_act").html("Act. AZ"); 
	}
	else{
		$("#ind_intr_pas").html("Pas. AZ"); 
		$("#ind_intr_act").html("Act. V"); 
	}
  
  	if ( sumas[2] >sumas[3]){
		$("#ind_extr_pas").html("Pas. AM"); 
		$("#ind_extr_act").html("Act. R"); 
	}
	else{
		$("#ind_extr_pas").html("Pas. R"); 
		$("#ind_extr_act").html("Act. AM"); 
	}

	var rejilla_json = [];
	var azul_json = [];
	var amarillo_json = [];
	var verde_json = [];
	var rojo_json = [];

	var key_cors=["blue", "green","red", "yellow"];
	for (var i = 0; i< 4; i++){
			rejilla_json[i] =  [rejilla[i], key_cors[i]];
			azul_json[i] = [azul[i], key_cors[i]];
			amarillo_json[i] = [amarillo[i], key_cors[i]];
			verde_json[i] = [verde[i], key_cors[i]];
			rojo_json[i] = [rojo[i], key_cors[i]];
		}


	rejilla_json = get_polo(rejilla_json);
	azul_json = get_polo(azul_json);
	amarillo_json = get_polo(amarillo_json);
	verde_json = get_polo(verde_json);
	rojo_json = get_polo(rojo_json);


	for (var i = 0; i< 4; i++){
		$("#polo0_"+i).attr('style', 'background-color:'+rejilla_json[i]);

		$("#polo1_"+i).attr('style', 'background-color:'+azul_json[i]);
		$("#polo2_"+i).attr('style', 'background-color:'+verde_json[i]);
		$("#polo3_"+i).attr('style', 'background-color:'+rojo_json[i]);
		$("#polo4_"+i).attr('style', 'background-color:'+amarillo_json[i]);

		
	}

	$('[id^="polo"]').each(function(){
    	if($(this).attr('style') == 'background-color:blue')
    		$(this).html("1");
    	if($(this).attr('style') == 'background-color:green')
    		$(this).html("2");
    	if($(this).attr('style') == 'background-color:red')
    		$(this).html("3");
    	if($(this).attr('style') == 'background-color:yellow')
    		$(this).html("4");
	})

//	if ($('[id^="polo"]').attr('style') == 'background-color:red')
//		$('[id^="polo"]').html("4");


	//rejilla_json.sort(function(a,b) {
    //return b[0]-a[0]
	//});
	//rejilla_json = rejilla_json.map(function(value,index) { return value[1]; });

	//console.log(rejilla_json);
	radar(5,8,4,7);

	cubo();




const skipped = (ctx, value) => ctx.p0.skip || ctx.p1.skip ? value : undefined;
const down = (ctx, value) => ctx.p0.parsed.y > ctx.p1.parsed.y ? value : undefined;
// </block:segmentUtils>

// <block:genericOptions:2>
const genericOptions = {
  fill: false,
  interaction: {
    intersect: false
  },
  radius: 0,
};

const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
  type: 'bar',
  data: {
    labels: [" Constante","Variable","","Directivo","Receptivo", "","Integración", "Diferenciación"],
    datasets: [{
      label: 'Columna 1',
      data: [55, 69, NaN, 68, 66, NaN, 67, 60],
      borderColor: "cyan",
      backgroundColor: ["blue", "red", "", "green", "blue" ,"", "blue","green"],
      order: 1
    },
    {
      label: 'Columna 2',
      data: [55, 69, NaN, 68, 66, NaN, 67, 60],
      borderColor: "magenta",
      backgroundColor: ["green", "yellow", "", "red", "yellow" ,"", "red","yellow"],
      order: 2
    },
    {
      label: 'Lineas',
      data: [65, 59, NaN, 48, 56, NaN, 57, 40],
      borderColor: 'black',
      type: 'line',
      spanGaps: false,
      order: 0
    },

    ]
  },
  options: genericOptions
});
</script>
